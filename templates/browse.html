{% extends "base.html" %}
{% block content %}
    <!-- Latest Reviews -->
    <div class="row">
        <div class="col s12">
            <h3 class="center subtitle">Browse</h3>
        </div>
    </div>
    <!-- Search Panel taken from Code Institute Task Manager Project and modified -->
    <div class="row card-panel white darken-1">
        <form action="{{  url_for('search') }}" method="POST" class="col s12">
            <div class="row valign-wrapper center-align">
                <div class="input-field col s12 m8">
                    <i class="fas fa-search prefix"></i>
                    <!-- Search Box -->
                    <input type="text" name="query" id="query" minlength="3" class="validate" required>
                    <label for="query">Search Read n' Reviewed</label>
                </div>
                <div class="col s12 m4">
                    <!-- Reset Button -->
                    <a href="{{ url_for('browse') }}" class="btn bg-blue">Reset</a>
                    <!-- Search Button -->
                    <button type="submit" class="btn bg-orange">
                        <i class="fas fa-search left"></i>Search
                    </button>
                </div>
            </div>
        </form>
    </div>
    <!-- Books to Browse -->
    {% for book in books %}
        <div class="row center">
            <div class="col s12 m6">
                <img src="{{ book.thumbnail }}" class="cover"><br>
            </div>
            <div class="col s12 m6">
                <p>{{ book.category }}</p>
                <h5>{{ book.title }}</h5>
                <p>{{ book.authors[0] }}</p> 
                <!-- Solution to html entities being displayed in the text found at: https://stackoverflow.com/questions/38175365/pass-json-from-flask-to-template-and-decode-html-entity-->
                <p>{{ book.text_snippet | safe }}</p>
                <p><a href="{{ url_for('view_book', book_id=book._id) }}">Read review...</a></p>
            </div>
        </div>
    {% endfor %}

{% endblock %}